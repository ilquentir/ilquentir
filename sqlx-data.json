{
  "db": "PostgreSQL",
  "0aa46b7f04ee1dba3c9c2eeb22661003c4d4caa72fc711bf672ad503c2f01c50": {
    "describe": {
      "columns": [
        {
          "name": "id?",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "tg_id",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "chat_tg_id",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "kind: PollKind",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "publication_date",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "published",
          "ordinal": 5,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\nSELECT\n    id as \"id?\",\n    tg_id,\n    chat_tg_id,\n    kind as \"kind: PollKind\",\n    publication_date,\n    published\nFROM polls\nWHERE\n    tg_id = $1\n            "
  },
  "0d72dc667fdf9d38154cba1cca39d8fae7b8be8932e849a2516e741e9f8ad314": {
    "describe": {
      "columns": [
        {
          "name": "id?",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "tg_id",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "chat_tg_id",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "kind: PollKind",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "publication_date",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "published",
          "ordinal": 5,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Varchar",
          "Timestamptz",
          "Bool"
        ]
      }
    },
    "query": "\nINSERT INTO polls (\n    chat_tg_id,\n    kind,\n    publication_date,\n    published\n)\nVALUES ($1, $2, $3, $4)\nRETURNING\n    id as \"id?\",\n    tg_id,\n    chat_tg_id,\n    kind as \"kind: PollKind\",\n    publication_date,\n    published\n"
  },
  "1c3c72718d5686d407ffd03a4de46f7d0188e441f8ea2dd1efe2f48155eff1ce": {
    "describe": {
      "columns": [
        {
          "name": "tg_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "active",
          "ordinal": 1,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\nINSERT INTO users (tg_id, active)\nVALUES ($1, true)\nON CONFLICT (tg_id) DO UPDATE SET active = true\nRETURNING tg_id, active\n            "
  },
  "358e11f467b10c383ff57da2e66408645352b23adb2f910e9f645dcc01ae2d9a": {
    "describe": {
      "columns": [
        {
          "name": "poll_tg_id",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "selected_value",
          "ordinal": 1,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Int4"
        ]
      }
    },
    "query": "\nINSERT INTO poll_answers (poll_tg_id, selected_value)\nVALUES ($1, $2)\nRETURNING poll_tg_id, selected_value\n                "
  },
  "52cd13fa2424bc0427fed724f5769d51b0c7f6c673f16ac5cce24a00c2cbb1d6": {
    "describe": {
      "columns": [
        {
          "name": "kind: PollKind",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "date!",
          "ordinal": 1,
          "type_info": "Date"
        },
        {
          "name": "selected_value",
          "ordinal": 2,
          "type_info": "Int4"
        },
        {
          "name": "n_selected!",
          "ordinal": 3,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false,
        null,
        false,
        null
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\nSELECT\n    polls.kind as \"kind: PollKind\",\n    DATE(polls.publication_date) as \"date!\",\n    selected_value,\n    COUNT(poll_answers.id) as \"n_selected!\"\nFROM poll_answers\nJOIN polls\nON poll_answers.poll_tg_id = polls.tg_id\nWHERE\n    polls.kind = $1\n    AND polls.publication_date BETWEEN NOW() - interval '24 hours' AND NOW()\nGROUP BY\n    selected_value,\n    polls.kind,\n    DATE(polls.publication_date)\n            "
  },
  "675d99ce9db8d89d365a4cea9320d7084a62664ff98f8ab46a96f1b7b0dbf245": {
    "describe": {
      "columns": [
        {
          "name": "id?",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "tg_id",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "chat_tg_id",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "kind: PollKind",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "publication_date",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "published",
          "ordinal": 5,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\nSELECT\n    id as \"id?\",\n    polls.tg_id as tg_id,\n    chat_tg_id,\n    kind as \"kind: PollKind\",\n    publication_date,\n    published\nFROM polls\nJOIN users\nON\n    polls.chat_tg_id = users.tg_id\nWHERE\n    NOT polls.published\n    AND polls.publication_date < NOW()\n    AND users.active\n            "
  },
  "9c71504b0686d369691963a15c574ee07a1ef5037c4ac13e0b1974f6c43db14a": {
    "describe": {
      "columns": [
        {
          "name": "n_answered!",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        null
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\nSELECT COUNT(DISTINCT poll.tg_id) as \"n_answered!\"\nFROM polls AS poll\nJOIN poll_answers AS answer\nON poll.tg_id = answer.poll_tg_id\nWHERE poll.chat_tg_id = $1\n            "
  },
  "aecab9eb2a73bdf0c84674328a9ad9839540b879a271c8dd7ee68edf9aabf7af": {
    "describe": {
      "columns": [
        {
          "name": "tg_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "active",
          "ordinal": 1,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\nSELECT tg_id, active\nFROM users\nWHERE\n    tg_id = $1\n    AND active\n            "
  },
  "baae46e939089f19236d02e6de1c6c69bbb0636ae28dcc592c0cc074be345dd7": {
    "describe": {
      "columns": [
        {
          "name": "id?",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "tg_id",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "chat_tg_id",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "kind: PollKind",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "publication_date",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "published",
          "ordinal": 5,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        true,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Varchar",
          "Int8",
          "Varchar",
          "Timestamptz",
          "Bool"
        ]
      }
    },
    "query": "\nUPDATE polls\nSET\n    tg_id = $2,\n    chat_tg_id = $3,\n    kind = $4,\n    publication_date = $5,\n    published = $6\nWHERE id = $1\nRETURNING\n    id as \"id?\",\n    tg_id,\n    chat_tg_id,\n    kind as \"kind: PollKind\",\n    publication_date,\n    published\n            "
  },
  "d60fbc223d7d94521aeca70d231404519e57543a98a2a6896ccdbf0605167f63": {
    "describe": {
      "columns": [
        {
          "name": "tg_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "active",
          "ordinal": 1,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\nSELECT tg_id, active\nFROM users\nWHERE active\n            "
  },
  "dae6e58fb74c36560936d2b11a8de0680c5c8af0b2e86d7a098321bee9d2efec": {
    "describe": {
      "columns": [
        {
          "name": "tg_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "active",
          "ordinal": 1,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\nINSERT INTO users (tg_id, active)\nVALUES ($1, false)\nON CONFLICT (tg_id) DO UPDATE SET active = false\nRETURNING tg_id, active\n            "
  },
  "e2819c3f53c6cd86c649306e1cd9176876c6dc42c0b94543a8e955a9ea5de747": {
    "describe": {
      "columns": [
        {
          "name": "kind: PollKind",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "date!",
          "ordinal": 1,
          "type_info": "Date"
        },
        {
          "name": "selected_value",
          "ordinal": 2,
          "type_info": "Int4"
        }
      ],
      "nullable": [
        false,
        null,
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Int8"
        ]
      }
    },
    "query": "\nSELECT\n    polls.kind as \"kind: PollKind\",\n    DATE(polls.publication_date) as \"date!\",\n    poll_answers.selected_value\nFROM poll_answers\nJOIN polls\nON poll_answers.poll_tg_id = polls.tg_id\nWHERE\n    polls.kind = $1\n    AND polls.chat_tg_id = $2\n    AND polls.publication_date BETWEEN NOW() - interval '8 days' AND NOW() - interval '1 minute'\nORDER BY \"date!\"\n            "
  }
}